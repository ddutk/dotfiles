#!/bin/bash

# Configuration
FONT="Droid Sans Mono-9"
BG="#2b2b2b"
FG="#e6e1dc"
SEL_BG="#3a4055"
SEL_FG="#d4cfc9"

CACHE="$HOME/.cache/dmenu_files"

# FIXME: ONLY DO THIS when changed
find $HOME/SpiderOak\ Hive $HOME/Dropbox -type f -o -type d > $CACHE
find $HOME -type d -not -name '.*' -maxdepth 1 >> $CACHE

SELECTED=`cat $CACHE | $HOME/bin/dmenu-history $HOME/.cache/dmenu_files_history -i -l 10 -fn "$FONT" -nb "$BG" -nf "$FG" -sb "$SEL_BG" -sf "$SEL_FG"`

if [[ -n "$SELECTED" ]]; then
  $HOME/bin/open "$SELECTED"
fi
