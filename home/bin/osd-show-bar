#!/bin/bash

VAL=$1
MAX=$2
COLOR=$3

if [ -z "$COLOR" ]; then
  COLOR="green"
fi

# This is configured to the width of my screen
STEPS=32

BAR=""
DENOMINATOR=$((MAX / STEPS))
LINES=$((VAL / DENOMINATOR))
DOTS=$((STEPS - LINES))
while [ $LINES -gt 0 ]; do
  BAR="${BAR}|"
  LINES=$((LINES - 1))
done
while [ $DOTS -gt 0 ]; do
  BAR="${BAR}."
  DOTS=$((DOTS - 1))
done

killall aosd_cat &> /dev/null

echo "$BAR" | aosd_cat -p 0 -x 50 -y 600 -n "Droid Sans Mono 50" -u 1000 -o 500 -R $COLOR -f 500
