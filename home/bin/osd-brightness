#!/bin/bash

# Root
BACKLIGHT=/sys/class/backlight/intel_backlight

# set max allowed brightness
MAX=`cat $BACKLIGHT/max_brightness`

STEPS="20"
STEP=$((MAX / STEPS))

NOW=`cat $BACKLIGHT/brightness`

function plus() {
	NEW=$((NOW + STEP))
  if [ $NEW -gt $((MAX)) ]; then
    NEW=$((MAX))
  fi
	echo $NEW > $BACKLIGHT/brightness
	NOW=$NEW
}

function minus() {
  NEW=$((NOW - STEP))
    if [ $(($NEW)) -lt 0 ]; then
      NEW=0
  fi
	echo $NEW > $BACKLIGHT/brightness
	NOW=$NEW
}

function show() {
  $HOME/bin/osd-show-bar $NOW $MAX
}

case "$1" in
        plus)
                plus
		show
        ;;
        minus)
                minus
		show
        ;;
esac

