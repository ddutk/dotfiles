#!/bin/bash
# Get a random MythBusters episode number

season_length="16
12
26
28
25
21
24
23
22
13
3"

season_ranges="1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16
1 3 4 5 6 7 8 9 10 11 12 13
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 23 24 25 26 27
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
1 2 3 4 5 6 6.5 7 8 9 10 11 12 13 14 15 16 17 18 19 20
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
1 2 3 4 5 6 7 8 9 10 11 18 19 20 21 22 23 24 25 26 27 28 29
1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22
1 2 3 4 5 6 7 8 9 10 11 12 13
1 2 3"

# Get array variables
IFS='
'
lengths=($season_length)
ranges=($season_ranges)
IFS=' '

num_seasons=${#lengths[*]}

# Get number of episodes
num_episodes=0
for (( i=0; i<$num_seasons ; i++ ))
do
  num_episodes=$(($num_episodes + ${lengths[i]}))
done

# Get the random episode
episode=$((`genrand 1 $num_episodes` - 1))

# Figure out which season it's in
carry=0
season=$(($num_seasons - 1))
for (( i=0; i<$num_seasons ; i++ ))
do
  carry=$(($carry + ${lengths[i]}))
  if [ $episode -lt $carry ]; then
    season=$i
    season_num=$((episode - carry + lengths[i]))
    break
  fi
done

# Get the range for this season and the number
range=(${ranges[season]})
season_episode=${range[season_num]}

echo "SEASON $((season + 1)), EPISODE $season_episode"

