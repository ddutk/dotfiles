#!/bin/sh
# Re-pack and backup Facebook from a ZIP

OUTDIR="${HOME}/Dropbox/Charles/Storage/Backup/"

echo "DOWNLOAD the Facebook ZIP archive and place it in the current directory."
read -p "Press any key to continue..."

# Sometimes this comes in with an HTML extension, for some reason (maybe a
# Safari bug.)
if [[ -e "facebook-charles.pence.zip.html" ]]; then
  mv facebook-charles.pence.zip.html facebook-charles.pence.zip
fi

if [[ ! -e "facebook-charles.pence.zip" ]]; then
  echo "Cannot find the Facebook ZIP file, aborting."
  exit 1
fi

unzip facebook-charles.pence.zip
rm facebook-charles.pence.zip
tar cvf facebook.tar charles.pence
rm -r charles.pence
xz -9 facebook.tar
mv facebook.tar.xz $OUTDIR
